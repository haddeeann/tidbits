The non-optimized solution runs at O notation of O(N^4 log N).

The optimized solution uses two pointers instead of the inner two for loops.

That makes the outer two loops run time to be O(N^2) and the two pointers part of the solution O(N).

So the optimized solutions has a run time of O(N^3) log N.